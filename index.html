<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Wesam AI Editor Pro</title>
    <style>
        * { box-sizing: border-box; }
        html, body { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #1e1e1e; color: #d4d4d4; 
            font-family: 'Segoe UI', sans-serif; overflow: hidden;
        }
        .app-container { display: flex; flex-direction: column; width: 100vw; height: 100vh; }
        .content-area { flex: 1; display: flex; overflow: hidden; }
        .vs-sidebar {
            width: 50px; background: #333333; border-left: 1px solid #252526;
            display: flex; flex-direction: column; align-items: center; padding-top: 10px; gap: 15px;
        }
        .icon-btn { 
            width: 35px; height: 35px; background: #444; border-radius: 5px; 
            cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; color: white;
        }
        .icon-btn:hover { background: #007acc; }
        .editors-container { flex: 1; display: flex; flex-direction: column; border-left: 1px solid #3c3c3c; gap: 2px; background: #252526; }
        .editor-box { flex: 1; display: flex; flex-direction: column; background: #1e1e1e; position: relative; }
        .pane-title { background: #2d2d2d; padding: 5px 15px; font-size: 11px; color: #007acc; border-bottom: 1px solid #3c3c3c; font-weight: bold; }
        .ai-ghost { position: absolute; top: 27px; left: 10px; right: 10px; font-family: 'Consolas', monospace; font-size: 14px; color: rgba(156, 220, 254, 0.2); pointer-events: none; white-space: pre-wrap; z-index: 1; line-height: 1.5; }
        textarea { flex: 1; background: transparent; color: #9cdcfe; padding: 10px; font-family: 'Consolas', monospace; font-size: 14px; border: none; outline: none; resize: none; z-index: 2; position: relative; line-height: 1.5; }
        .preview-pane { flex: 1; background: white; display: flex; flex-direction: column; }
        iframe { flex: 1; border: none; width: 100%; height: 100%; background: white; }
        .status-bar { height: 25px; background: #007acc; color: white; font-size: 12px; display: flex; align-items: center; padding: 0 15px; justify-content: space-between; }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="content-area">
            <div class="vs-sidebar">
                <div class="icon-btn" onclick="downloadProject()" title="ØªØ­Ù…ÙŠÙ„">â¬‡ï¸</div>
                <div class="icon-btn" onclick="undoDelete()" title="ØªØ±Ø§Ø¬Ø¹ (Ctrl+Z)">ğŸ”„</div>
                <div class="icon-btn" onclick="alert('Ø§Ù„Ø°ÙƒØ§Ø¡ ÙØ¹Ø§Ù„!')">ğŸ¤–</div>
            </div>
            <div class="editors-container">
                <div class="editor-box">
                    <div class="pane-title" style="color: #e34c26;">HTML</div>
                    <div id="html-ghost" class="ai-ghost"></div>
                    <textarea id="html-code" spellcheck="false" oninput="handleAI('html')"></textarea>
                </div>
                <div class="editor-box">
                    <div class="pane-title" style="color: #264de4;">CSS</div>
                    <div id="css-ghost" class="ai-ghost"></div>
                    <textarea id="css-code" spellcheck="false" oninput="handleAI('css')"></textarea>
                </div>
                <div class="editor-box">
                    <div class="pane-title" style="color: #f7df1e;">JS</div>
                    <div id="js-ghost" class="ai-ghost"></div>
                    <textarea id="js-code" spellcheck="false" oninput="handleAI('js')"></textarea>
                </div>
            </div>
            <div class="preview-pane">
                <div class="pane-title" style="background:#f3f3f3; color:#333;">Live Preview</div>
                <iframe id="wesam-result"></iframe>
            </div>
        </div>
        <div class="status-bar">
            <span>Wesam Pro AI | ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø§Ù„Ø­Ø°Ù: Ctrl + Z</span>
            <span id="char-count">Chars: 0</span>
        </div>
    </div>

    <script>
        const htmlInput = document.getElementById('html-code');
        const cssInput = document.getElementById('css-code');
        const jsInput = document.getElementById('js-code');
        const output = document.getElementById('wesam-result');

        // Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
        function updatePreview() {
            const code = `<!DOCTYPE html><html><head><style>${cssInput.value}</style></head><body>${htmlInput.value}<script>${jsInput.value}<\/script></body></html>`;
            output.srcdoc = code;

            localStorage.setItem('w_html', htmlInput.value);
            localStorage.setItem('w_css', cssInput.value);
            localStorage.setItem('w_js', jsInput.value);
            document.getElementById('char-count').innerText = "Chars: " + (htmlInput.value.length + cssInput.value.length + jsInput.value.length);
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ±Ø§Ø¬Ø¹ (Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸)
        function undoDelete() {
            htmlInput.value = localStorage.getItem('w_html') || "";
            cssInput.value = localStorage.getItem('w_css') || "";
            jsInput.value = localStorage.getItem('w_js') || "";
            updatePreview();
        }

        // ØªÙØ¹ÙŠÙ„ Ø§Ø®ØªØµØ§Ø± Ctrl + Z
        window.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'z') {
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø®Ø§Ù†Ø© ÙØ§Ø±ØºØ©ØŒ Ù†Ø³Ø­Ø¨ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
                if (htmlInput.value === "" && cssInput.value === "" && jsInput.value === "") {
                    undoDelete();
                }
            }
        });

        // Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø³ÙŠØ· (Ghost Text)
        function handleAI(type) {
            updatePreview();
        }

        function downloadProject() {
            const final = `<!DOCTYPE html><html><head><style>${cssInput.value}</style></head><body>${htmlInput.value}<script>${jsInput.value}<\/script></body></html>`;
            const blob = new Blob([final], {type: 'text/html'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob); a.download = "index.html"; a.click();
        }

        window.onload = () => {
            htmlInput.value = localStorage.getItem('w_html') || "<h1>Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ø§Ù…</h1>";
            cssInput.value = localStorage.getItem('w_css') || "";
            jsInput.value = localStorage.getItem('w_js') || "";
            updatePreview();
        };
    </script>
</body>
</html>
